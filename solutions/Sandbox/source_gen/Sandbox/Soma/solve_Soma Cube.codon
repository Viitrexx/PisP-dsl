# Solver generated using plaintextgen
import time
import sys
INT_BITS: Static[int] = 34
aspects = ["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","A0","B0","L0","P0","V0","T0","Z0",]
e = [["0","1","3","12","A0",],["0","9","10","13","B0",],["0","3","12","13","B0",],["0","9","18","3","L0",],["0","9","18","1","L0",],["0","3","6","9","L0",],["0","3","6","1","L0",],["0","1","2","9","L0",],["0","1","2","3","L0",],["0","1","3","9","P0",],["0","9","3","V0",],["0","9","1","V0",],["0","3","1","V0",],["1","4","0","9","A0",],["1","0","10","13","A0",],["1","2","4","13","A0",],["1","10","11","14","B0",],["1","4","13","14","B0",],["1","10","13","12","B0",],["1","10","19","4","L0",],["1","10","19","0","L0",],["1","10","19","2","L0",],["1","4","7","10","L0",],["1","4","7","0","L0",],["1","4","7","2","L0",],["1","0","10","4","P0",],["1","2","4","10","P0",],["1","0","2","10","T0",],["1","0","2","4","T0",],["1","10","4","V0",],["1","10","0","V0",],["1","10","2","V0",],["1","4","0","V0",],["1","4","2","V0",],["1","2","10","9","Z0",],["1","2","4","3","Z0",],["2","5","1","10","A0",],["2","1","11","14","A0",],["2","11","14","13","B0",],["2","11","20","5","L0",],["2","11","20","1","L0",],["2","5","8","11","L0",],["2","5","8","1","L0",],["2","1","0","11","L0",],["2","1","0","5","L0",],["2","1","11","5","P0",],["2","11","5","V0",],["2","11","1","V0",],["2","5","1","V0",],["3","0","4","13","A0",],["3","4","12","9","A0",],["3","4","6","15","A0",],["3","12","13","16","B0",],["3","6","15","16","B0",],["3","12","9","10","B0",],["3","12","21","0","L0",],["3","12","21","6","L0",],["3","12","21","4","L0",],["3","4","5","12","L0",],["3","4","5","0","L0",],["3","4","5","6","L0",],["3","4","12","0","P0",],["3","4","6","12","P0",],["3","0","6","12","T0",],["3","0","6","4","T0",],["3","12","0","V0",],["3","12","6","V0",],["3","12","4","V0",],["3","0","4","V0",],["3","6","4","V0",],["3","6","12","9","Z0",],["3","6","4","1","Z0",],["4","1","5","14","A0",],["4","7","3","12","A0",],["4","3","13","16","A0",],["4","5","13","10","A0",],["4","3","1","10","A0",],["4","5","7","16","A0",],["4","13","12","9","B0",],["4","13","14","17","B0",],["4","1","10","9","B0",],["4","7","16","17","B0",],["4","13","16","15","B0",],["4","13","10","11","B0",],["4","13","22","1","L0",],["4","13","22","7","L0",],["4","13","22","3","L0",],["4","13","22","5","L0",],["4","3","13","7","P0",],["4","5","13","1","P0",],["4","3","1","13","P0",],["4","5","7","13","P0",],["4","1","7","13","T0",],["4","1","7","3","T0",],["4","1","7","5","T0",],["4","3","5","13","T0",],["4","3","5","1","T0",],["4","3","5","7","T0",],["4","13","1","V0",],["4","13","7","V0",],["4","13","3","V0",],["4","13","5","V0",],["4","1","3","V0",],["4","7","3","V0",],["4","1","5","V0",],["4","7","5","V0",],["4","7","13","10","Z0",],["4","7","3","0","Z0",],["4","7","5","2","Z0",],["4","5","13","12","Z0",],["4","5","1","0","Z0",],["4","5","7","6","Z0",],["5","8","4","13","A0",],["5","4","14","17","A0",],["5","4","2","11","A0",],["5","14","13","10","B0",],["5","2","11","10","B0",],["5","14","17","16","B0",],["5","14","23","2","L0",],["5","14","23","8","L0",],["5","14","23","4","L0",],["5","4","3","14","L0",],["5","4","3","2","L0",],["5","4","3","8","L0",],["5","4","14","8","P0",],["5","4","2","14","P0",],["5","2","8","14","T0",],["5","2","8","4","T0",],["5","14","2","V0",],["5","14","8","V0",],["5","14","4","V0",],["5","2","4","V0",],["5","8","4","V0",],["5","8","14","11","Z0",],["5","8","4","1","Z0",],["6","3","7","16","A0",],["6","7","15","12","A0",],["6","15","12","13","B0",],["6","15","24","3","L0",],["6","15","24","7","L0",],["6","3","0","15","L0",],["6","3","0","7","L0",],["6","7","8","15","L0",],["6","7","8","3","L0",],["6","7","15","3","P0",],["6","15","3","V0",],["6","15","7","V0",],["6","3","7","V0",],["7","4","8","17","A0",],["7","8","16","13","A0",],["7","6","4","13","A0",],["7","16","15","12","B0",],["7","4","13","12","B0",],["7","16","13","14","B0",],["7","16","25","4","L0",],["7","16","25","6","L0",],["7","16","25","8","L0",],["7","4","1","16","L0",],["7","4","1","6","L0",],["7","4","1","8","L0",],["7","8","16","4","P0",],["7","6","4","16","P0",],["7","6","8","16","T0",],["7","6","8","4","T0",],["7","16","4","V0",],["7","16","6","V0",],["7","16","8","V0",],["7","4","6","V0",],["7","4","8","V0",],["7","8","16","15","Z0",],["7","8","4","3","Z0",],["8","7","5","14","A0",],["8","17","16","13","B0",],["8","5","14","13","B0",],["8","17","26","5","L0",],["8","17","26","7","L0",],["8","5","2","17","L0",],["8","5","2","7","L0",],["8","7","6","17","L0",],["8","7","6","5","L0",],["8","7","5","17","P0",],["8","17","5","V0",],["8","17","7","V0",],["8","5","7","V0",],["9","12","10","1","A0",],["9","10","0","3","A0",],["9","10","12","21","A0",],["9","18","19","22","B0",],["9","12","21","22","B0",],["9","0","3","4","B0",],["9","12","15","0","L0",],["9","12","15","18","L0",],["9","12","15","10","L0",],["9","10","11","0","L0",],["9","10","11","18","L0",],["9","10","11","12","L0",],["9","10","0","12","P0",],["9","10","12","18","P0",],["9","0","18","12","T0",],["9","0","18","10","T0",],["9","0","12","V0",],["9","18","12","V0",],["9","0","10","V0",],["9","18","10","V0",],["9","12","10","V0",],["9","18","12","3","Z0",],["9","18","10","1","Z0",],["10","13","9","18","A0",],["10","13","11","2","A0",],["10","9","19","22","A0",],["10","11","1","4","A0",],["10","9","13","4","A0",],["10","11","13","22","A0",],["10","1","0","3","B0",],["10","19","20","23","B0",],["10","13","4","3","B0",],["10","13","22","23","B0",],["10","19","22","21","B0",],["10","1","4","5","B0",],["10","13","16","1","L0",],["10","13","16","19","L0",],["10","13","16","9","L0",],["10","13","16","11","L0",],["10","9","19","13","P0",],["10","11","1","13","P0",],["10","9","13","1","P0",],["10","11","13","19","P0",],["10","1","19","13","T0",],["10","1","19","9","T0",],["10","1","19","11","T0",],["10","9","11","1","T0",],["10","9","11","19","T0",],["10","9","11","13","T0",],["10","1","13","V0",],["10","19","13","V0",],["10","1","9","V0",],["10","19","9","V0",],["10","1","11","V0",],["10","19","11","V0",],["10","13","9","V0",],["10","13","11","V0",],["10","19","13","4","Z0",],["10","19","9","0","Z0",],["10","19","11","2","Z0",],["10","11","1","0","Z0",],["10","11","19","18","Z0",],["10","11","13","12","Z0",],["11","14","10","19","A0",],["11","10","20","23","A0",],["11","10","14","5","A0",],["11","2","1","4","B0",],["11","14","5","4","B0",],["11","20","23","22","B0",],["11","14","17","2","L0",],["11","14","17","20","L0",],["11","14","17","10","L0",],["11","10","9","2","L0",],["11","10","9","20","L0",],["11","10","9","14","L0",],["11","10","20","14","P0",],["11","10","14","2","P0",],["11","2","20","14","T0",],["11","2","20","10","T0",],["11","2","14","V0",],["11","20","14","V0",],["11","2","10","V0",],["11","20","10","V0",],["11","14","10","V0",],["11","20","14","5","Z0",],["11","20","10","1","Z0",],["12","9","13","22","A0",],["12","15","13","4","A0",],["12","13","3","6","A0",],["12","13","21","18","A0",],["12","13","9","0","A0",],["12","13","15","24","A0",],["12","3","4","1","B0",],["12","21","22","25","B0",],["12","9","0","1","B0",],["12","15","24","25","B0",],["12","21","18","19","B0",],["12","3","6","7","B0",],["12","13","14","3","L0",],["12","13","14","21","L0",],["12","13","14","9","L0",],["12","13","14","15","L0",],["12","13","3","15","P0",],["12","13","21","9","P0",],["12","13","9","3","P0",],["12","13","15","21","P0",],["12","3","21","9","T0",],["12","3","21","15","T0",],["12","3","21","13","T0",],["12","9","15","3","T0",],["12","9","15","21","T0",],["12","9","15","13","T0",],["12","3","9","V0",],["12","21","9","V0",],["12","3","15","V0",],["12","21","15","V0",],["12","3","13","V0",],["12","21","13","V0",],["12","9","13","V0",],["12","15","13","V0",],["12","21","9","0","Z0",],["12","21","15","6","Z0",],["12","21","13","4","Z0",],["12","15","3","0","Z0",],["12","15","21","18","Z0",],["12","15","13","10","Z0",],["13","10","12","3","A0",],["13","10","14","23","A0",],["13","16","12","21","A0",],["13","16","14","5","A0",],["13","12","4","1","A0",],["13","12","22","25","A0",],["13","14","4","7","A0",],["13","14","22","19","A0",],["13","12","10","19","A0",],["13","12","16","7","A0",],["13","14","10","1","A0",],["13","14","16","25","A0",],["13","22","21","18","B0",],["13","4","5","2","B0",],["13","4","3","6","B0",],["13","22","23","26","B0",],["13","16","7","6","B0",],["13","10","19","18","B0",],["13","10","1","2","B0",],["13","16","25","26","B0",],["13","4","1","0","B0",],["13","22","25","24","B0",],["13","22","19","20","B0",],["13","4","7","8","B0",],["13","12","4","10","P0",],["13","12","22","16","P0",],["13","14","4","16","P0",],["13","14","22","10","P0",],["13","12","10","22","P0",],["13","12","16","4","P0",],["13","14","10","4","P0",],["13","14","16","22","P0",],["13","4","22","10","T0",],["13","4","22","16","T0",],["13","4","22","12","T0",],["13","4","22","14","T0",],["13","10","16","4","T0",],["13","10","16","22","T0",],["13","10","16","12","T0",],["13","10","16","14","T0",],["13","12","14","4","T0",],["13","12","14","22","T0",],["13","12","14","10","T0",],["13","12","14","16","T0",],["13","4","10","V0",],["13","22","10","V0",],["13","4","16","V0",],["13","22","16","V0",],["13","4","12","V0",],["13","22","12","V0",],["13","4","14","V0",],["13","22","14","V0",],["13","10","12","V0",],["13","16","12","V0",],["13","10","14","V0",],["13","16","14","V0",],["13","22","10","1","Z0",],["13","22","16","7","Z0",],["13","22","12","3","Z0",],["13","22","14","5","Z0",],["13","16","4","1","Z0",],["13","16","22","19","Z0",],["13","16","12","9","Z0",],["13","16","14","11","Z0",],["13","14","4","3","Z0",],["13","14","22","21","Z0",],["13","14","10","9","Z0",],["13","14","16","15","Z0",],["14","11","13","4","A0",],["14","17","13","22","A0",],["14","13","5","2","A0",],["14","13","23","26","A0",],["14","13","11","20","A0",],["14","13","17","8","A0",],["14","23","22","19","B0",],["14","5","4","7","B0",],["14","17","8","7","B0",],["14","11","20","19","B0",],["14","5","2","1","B0",],["14","23","26","25","B0",],["14","13","12","5","L0",],["14","13","12","23","L0",],["14","13","12","11","L0",],["14","13","12","17","L0",],["14","13","5","11","P0",],["14","13","23","17","P0",],["14","13","11","23","P0",],["14","13","17","5","P0",],["14","5","23","11","T0",],["14","5","23","17","T0",],["14","5","23","13","T0",],["14","11","17","5","T0",],["14","11","17","23","T0",],["14","11","17","13","T0",],["14","5","11","V0",],["14","23","11","V0",],["14","5","17","V0",],["14","23","17","V0",],["14","5","13","V0",],["14","23","13","V0",],["14","11","13","V0",],["14","17","13","V0",],["14","23","11","2","Z0",],["14","23","17","8","Z0",],["14","23","13","4","Z0",],["14","17","5","2","Z0",],["14","17","23","20","Z0",],["14","17","13","10","Z0",],["15","12","16","25","A0",],["15","16","24","21","A0",],["15","16","12","3","A0",],["15","6","7","4","B0",],["15","12","3","4","B0",],["15","24","21","22","B0",],["15","12","9","6","L0",],["15","12","9","24","L0",],["15","12","9","16","L0",],["15","16","17","6","L0",],["15","16","17","24","L0",],["15","16","17","12","L0",],["15","16","24","12","P0",],["15","16","12","6","P0",],["15","6","24","12","T0",],["15","6","24","16","T0",],["15","6","12","V0",],["15","24","12","V0",],["15","6","16","V0",],["15","24","16","V0",],["15","12","16","V0",],["15","24","12","3","Z0",],["15","24","16","7","Z0",],["16","13","15","6","A0",],["16","13","17","26","A0",],["16","15","7","4","A0",],["16","17","25","22","A0",],["16","15","13","22","A0",],["16","17","13","4","A0",],["16","25","24","21","B0",],["16","7","8","5","B0",],["16","13","22","21","B0",],["16","13","4","5","B0",],["16","7","4","3","B0",],["16","25","22","23","B0",],["16","13","10","7","L0",],["16","13","10","25","L0",],["16","13","10","15","L0",],["16","13","10","17","L0",],["16","15","7","13","P0",],["16","17","25","13","P0",],["16","15","13","25","P0",],["16","17","13","7","P0",],["16","7","25","13","T0",],["16","7","25","15","T0",],["16","7","25","17","T0",],["16","15","17","7","T0",],["16","15","17","25","T0",],["16","15","17","13","T0",],["16","7","13","V0",],["16","25","13","V0",],["16","7","15","V0",],["16","25","15","V0",],["16","7","17","V0",],["16","25","17","V0",],["16","13","15","V0",],["16","13","17","V0",],["16","25","13","4","Z0",],["16","25","15","6","Z0",],["16","25","17","8","Z0",],["16","17","7","6","Z0",],["16","17","25","24","Z0",],["16","17","13","12","Z0",],["17","14","16","7","A0",],["17","16","8","5","A0",],["17","16","14","23","A0",],["17","26","25","22","B0",],["17","14","23","22","B0",],["17","8","5","4","B0",],["17","14","11","8","L0",],["17","14","11","26","L0",],["17","14","11","16","L0",],["17","16","15","8","L0",],["17","16","15","26","L0",],["17","16","15","14","L0",],["17","16","8","14","P0",],["17","16","14","26","P0",],["17","8","26","14","T0",],["17","8","26","16","T0",],["17","8","14","V0",],["17","26","14","V0",],["17","8","16","V0",],["17","26","16","V0",],["17","14","16","V0",],["17","26","14","5","Z0",],["17","26","16","7","Z0",],["18","21","19","10","A0",],["18","19","9","12","A0",],["18","9","12","13","B0",],["18","9","0","21","L0",],["18","9","0","19","L0",],["18","21","24","9","L0",],["18","21","24","19","L0",],["18","19","20","9","L0",],["18","19","20","21","L0",],["18","19","9","21","P0",],["18","9","21","V0",],["18","9","19","V0",],["18","21","19","V0",],["19","22","20","11","A0",],["19","20","10","13","A0",],["19","18","22","13","A0",],["19","10","9","12","B0",],["19","22","13","12","B0",],["19","10","13","14","B0",],["19","10","1","22","L0",],["19","10","1","18","L0",],["19","10","1","20","L0",],["19","22","25","10","L0",],["19","22","25","18","L0",],["19","22","25","20","L0",],["19","20","10","22","P0",],["19","18","22","10","P0",],["19","18","20","10","T0",],["19","18","20","22","T0",],["19","10","22","V0",],["19","10","18","V0",],["19","10","20","V0",],["19","22","18","V0",],["19","22","20","V0",],["19","20","10","9","Z0",],["19","20","22","21","Z0",],["20","19","23","14","A0",],["20","11","10","13","B0",],["20","23","14","13","B0",],["20","11","2","23","L0",],["20","11","2","19","L0",],["20","23","26","11","L0",],["20","23","26","19","L0",],["20","19","18","11","L0",],["20","19","18","23","L0",],["20","19","23","11","P0",],["20","11","23","V0",],["20","11","19","V0",],["20","23","19","V0",],["21","24","22","13","A0",],["21","22","12","15","A0",],["21","22","18","9","A0",],["21","12","13","10","B0",],["21","18","9","10","B0",],["21","12","15","16","B0",],["21","12","3","18","L0",],["21","12","3","24","L0",],["21","12","3","22","L0",],["21","22","23","12","L0",],["21","22","23","18","L0",],["21","22","23","24","L0",],["21","22","12","24","P0",],["21","22","18","12","P0",],["21","18","24","12","T0",],["21","18","24","22","T0",],["21","12","18","V0",],["21","12","24","V0",],["21","12","22","V0",],["21","18","22","V0",],["21","24","22","V0",],["21","24","12","9","Z0",],["21","24","22","19","Z0",],["22","19","21","12","A0",],["22","25","23","14","A0",],["22","21","13","10","A0",],["22","23","13","16","A0",],["22","21","25","16","A0",],["22","23","19","10","A0",],["22","13","14","11","B0",],["22","13","12","15","B0",],["22","25","16","15","B0",],["22","19","10","11","B0",],["22","13","10","9","B0",],["22","13","16","17","B0",],["22","13","4","19","L0",],["22","13","4","25","L0",],["22","13","4","21","L0",],["22","13","4","23","L0",],["22","21","13","19","P0",],["22","23","13","25","P0",],["22","21","25","13","P0",],["22","23","19","13","P0",],["22","19","25","13","T0",],["22","19","25","21","T0",],["22","19","25","23","T0",],["22","21","23","13","T0",],["22","21","23","19","T0",],["22","21","23","25","T0",],["22","13","19","V0",],["22","13","25","V0",],["22","13","21","V0",],["22","13","23","V0",],["22","19","21","V0",],["22","25","21","V0",],["22","19","23","V0",],["22","25","23","V0",],["22","25","13","10","Z0",],["22","25","21","18","Z0",],["22","25","23","20","Z0",],["22","23","13","12","Z0",],["22","23","19","18","Z0",],["22","23","25","24","Z0",],["23","20","22","13","A0",],["23","22","14","11","A0",],["23","22","26","17","A0",],["23","14","13","16","B0",],["23","26","17","16","B0",],["23","14","11","10","B0",],["23","14","5","20","L0",],["23","14","5","26","L0",],["23","14","5","22","L0",],["23","22","21","14","L0",],["23","22","21","20","L0",],["23","22","21","26","L0",],["23","22","14","20","P0",],["23","22","26","14","P0",],["23","20","26","14","T0",],["23","20","26","22","T0",],["23","14","20","V0",],["23","14","26","V0",],["23","14","22","V0",],["23","20","22","V0",],["23","26","22","V0",],["23","26","14","11","Z0",],["23","26","22","19","Z0",],["24","25","21","12","A0",],["24","15","16","13","B0",],["24","21","12","13","B0",],["24","15","6","21","L0",],["24","15","6","25","L0",],["24","21","18","15","L0",],["24","21","18","25","L0",],["24","25","26","15","L0",],["24","25","26","21","L0",],["24","25","21","15","P0",],["24","15","21","V0",],["24","15","25","V0",],["24","21","25","V0",],["25","22","24","15","A0",],["25","24","16","13","A0",],["25","26","22","13","A0",],["25","16","17","14","B0",],["25","22","13","14","B0",],["25","16","13","12","B0",],["25","16","7","22","L0",],["25","16","7","24","L0",],["25","16","7","26","L0",],["25","22","19","16","L0",],["25","22","19","24","L0",],["25","22","19","26","L0",],["25","24","16","22","P0",],["25","26","22","16","P0",],["25","24","26","16","T0",],["25","24","26","22","T0",],["25","16","22","V0",],["25","16","24","V0",],["25","16","26","V0",],["25","22","24","V0",],["25","22","26","V0",],["25","26","16","15","Z0",],["25","26","22","21","Z0",],["26","23","25","16","A0",],["26","25","17","14","A0",],["26","17","14","13","B0",],["26","17","8","23","L0",],["26","17","8","25","L0",],["26","23","20","17","L0",],["26","23","20","25","L0",],["26","25","24","17","L0",],["26","25","24","23","L0",],["26","25","17","23","P0",],["26","17","23","V0",],["26","17","25","V0",],["26","23","25","V0",],]
encoding = {a:UInt[INT_BITS](UInt[INT_BITS](1) << UInt[INT_BITS](i)) for i,a in enumerate(aspects)}
decoding = {UInt[INT_BITS](UInt[INT_BITS](1) << UInt[INT_BITS](i)):a for i,a in enumerate(aspects)}
encode = lambda e: sum([encoding[k] for k in e], UInt[INT_BITS](0))
decode = lambda i: [decoding[UInt[INT_BITS](UInt[INT_BITS](1) << UInt[INT_BITS](j))] for j in range(len(aspects)) if UInt[INT_BITS](UInt[INT_BITS](1) << UInt[INT_BITS](j)) & i]
encodedEmbeddings = [encode(ee) for ee in e]
embeddings = [decode(ee) for ee in set(encodedEmbeddings)]

A = (UInt[INT_BITS](UInt[INT_BITS](1) << UInt[INT_BITS]((len(aspects)))) - UInt[INT_BITS](1))
E = sorted(list(set(encodedEmbeddings)), reverse=True)
print(len(E), "embeddings")
p = UInt[INT_BITS](0)
S = []
t = UInt[INT_BITS](-1)
counter = 0
visits = 0
S.append((p, [e for e in E if p & e == UInt[INT_BITS](0)], t))
print("Solving Soma Cube bitwise...")
seconds = time.time()
while len(S) > 0:
    visits += 1
    pp, EE, t = S[-1]
    S.pop()
    if pp == A:
        counter += 1
        print(f"\r{counter}", end="")
        sys.stdout.flush()
    elif len(EE) > 0:
        # Zero-fit-cutoff (methode 2 Tonneijk)
        c = pp
        for e in EE:
            if e & pp == UInt[INT_BITS](0):
                c = e | c
        if c != A:
            continue # prune
        e = EE[0]
        if e & pp == UInt[INT_BITS](0):
            S.append((pp, EE[1:], t))
            S.append((pp | e, [ee for ee in EE[1:] if (pp | e) & ee == UInt[INT_BITS](0)], e))
        else:
            assert False

print(f"\rFound {counter} solutions in {time.time() - seconds} seconds while visiting {visits} nodes.")
