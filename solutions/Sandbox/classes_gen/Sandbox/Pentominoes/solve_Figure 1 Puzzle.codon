# Solver generated using plaintextgen
import time
import sys
INT_BITS: Static[int] = 30
aspects = ["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","L pentomino0","P pentomino0","T pentomino0","U pentomino0","X pentomino0",]
e = [["0","5","10","15","16","L pentomino0",],["0","1","2","3","8","L pentomino0",],["0","5","1","6","2","P pentomino0",],["0","1","5","6","10","P pentomino0",],["1","6","11","16","17","L pentomino0",],["1","2","3","4","9","L pentomino0",],["1","6","11","16","15","L pentomino0",],["1","0","6","5","11","P pentomino0",],["1","6","2","7","3","P pentomino0",],["1","2","6","7","11","P pentomino0",],["1","2","0","7","5","U pentomino0",],["2","7","12","17","18","L pentomino0",],["2","7","12","17","16","L pentomino0",],["2","1","7","6","12","P pentomino0",],["2","7","3","8","4","P pentomino0",],["2","3","7","8","12","P pentomino0",],["2","7","1","6","0","P pentomino0",],["2","3","1","8","6","U pentomino0",],["2","1","0","6","11","T pentomino0",],["3","2","1","0","5","L pentomino0",],["3","8","13","18","19","L pentomino0",],["3","8","13","18","17","L pentomino0",],["3","2","8","7","13","P pentomino0",],["3","4","8","9","13","P pentomino0",],["3","8","2","7","1","P pentomino0",],["3","4","2","9","7","U pentomino0",],["3","2","1","7","12","T pentomino0",],["4","3","2","1","6","L pentomino0",],["4","9","14","19","18","L pentomino0",],["4","3","9","8","14","P pentomino0",],["4","9","3","8","2","P pentomino0",],["4","3","2","8","13","T pentomino0",],["5","6","7","8","3","L pentomino0",],["5","10","15","20","21","L pentomino0",],["5","6","7","8","13","L pentomino0",],["5","10","6","11","7","P pentomino0",],["5","0","6","1","7","P pentomino0",],["5","6","10","11","15","P pentomino0",],["5","0","10","1","11","U pentomino0",],["6","1","11","7","5","X pentomino0",],["6","7","8","9","4","L pentomino0",],["6","11","16","21","22","L pentomino0",],["6","7","8","9","14","L pentomino0",],["6","11","16","21","20","L pentomino0",],["6","5","11","10","16","P pentomino0",],["6","11","7","12","8","P pentomino0",],["6","1","7","2","8","P pentomino0",],["6","7","11","12","16","P pentomino0",],["6","7","5","12","10","U pentomino0",],["6","11","1","10","0","U pentomino0",],["6","5","7","0","2","U pentomino0",],["6","1","11","2","12","U pentomino0",],["7","2","12","8","6","X pentomino0",],["7","12","17","22","23","L pentomino0",],["7","12","17","22","21","L pentomino0",],["7","6","12","11","17","P pentomino0",],["7","2","6","1","5","P pentomino0",],["7","12","8","13","9","P pentomino0",],["7","2","8","3","9","P pentomino0",],["7","8","12","13","17","P pentomino0",],["7","12","6","11","5","P pentomino0",],["7","8","6","13","11","U pentomino0",],["7","12","2","11","1","U pentomino0",],["7","6","8","1","3","U pentomino0",],["7","2","12","3","13","U pentomino0",],["7","6","5","11","16","T pentomino0",],["8","3","13","9","7","X pentomino0",],["8","7","6","5","10","L pentomino0",],["8","13","18","23","24","L pentomino0",],["8","7","6","5","0","L pentomino0",],["8","13","18","23","22","L pentomino0",],["8","7","13","12","18","P pentomino0",],["8","3","7","2","6","P pentomino0",],["8","9","13","14","18","P pentomino0",],["8","13","7","12","6","P pentomino0",],["8","9","7","14","12","U pentomino0",],["8","13","3","12","2","U pentomino0",],["8","7","9","2","4","U pentomino0",],["8","3","13","4","14","U pentomino0",],["8","7","6","12","17","T pentomino0",],["9","8","7","6","11","L pentomino0",],["9","8","7","6","1","L pentomino0",],["9","14","19","24","23","L pentomino0",],["9","8","14","13","19","P pentomino0",],["9","4","8","3","7","P pentomino0",],["9","14","8","13","7","P pentomino0",],["9","14","4","13","3","U pentomino0",],["9","8","7","13","18","T pentomino0",],["10","11","12","13","8","L pentomino0",],["10","11","12","13","18","L pentomino0",],["10","11","5","6","0","P pentomino0",],["10","15","11","16","12","P pentomino0",],["10","5","11","6","12","P pentomino0",],["10","11","15","16","20","P pentomino0",],["10","5","15","6","16","U pentomino0",],["10","5","0","6","7","T pentomino0",],["11","6","16","12","10","X pentomino0",],["11","12","13","14","9","L pentomino0",],["11","12","13","14","19","L pentomino0",],["11","10","16","15","21","P pentomino0",],["11","12","6","7","1","P pentomino0",],["11","16","12","17","13","P pentomino0",],["11","10","6","5","1","P pentomino0",],["11","6","12","7","13","P pentomino0",],["11","12","16","17","21","P pentomino0",],["11","12","10","17","15","U pentomino0",],["11","16","6","15","5","U pentomino0",],["11","10","12","5","7","U pentomino0",],["11","6","16","7","17","U pentomino0",],["11","6","1","7","8","T pentomino0",],["12","7","17","13","11","X pentomino0",],["12","11","17","16","22","P pentomino0",],["12","7","11","6","10","P pentomino0",],["12","13","7","8","2","P pentomino0",],["12","17","13","18","14","P pentomino0",],["12","11","7","6","2","P pentomino0",],["12","7","13","8","14","P pentomino0",],["12","13","17","18","22","P pentomino0",],["12","17","11","16","10","P pentomino0",],["12","13","11","18","16","U pentomino0",],["12","17","7","16","6","U pentomino0",],["12","11","13","6","8","U pentomino0",],["12","7","17","8","18","U pentomino0",],["12","11","10","16","21","T pentomino0",],["12","7","2","6","5","T pentomino0",],["12","11","10","6","1","T pentomino0",],["12","7","2","8","9","T pentomino0",],["13","8","18","14","12","X pentomino0",],["13","12","11","10","15","L pentomino0",],["13","12","11","10","5","L pentomino0",],["13","12","18","17","23","P pentomino0",],["13","8","12","7","11","P pentomino0",],["13","14","8","9","3","P pentomino0",],["13","12","8","7","3","P pentomino0",],["13","14","18","19","23","P pentomino0",],["13","18","12","17","11","P pentomino0",],["13","14","12","19","17","U pentomino0",],["13","18","8","17","7","U pentomino0",],["13","12","14","7","9","U pentomino0",],["13","8","18","9","19","U pentomino0",],["13","12","11","17","22","T pentomino0",],["13","8","3","7","6","T pentomino0",],["13","12","11","7","2","T pentomino0",],["14","13","12","11","16","L pentomino0",],["14","13","12","11","6","L pentomino0",],["14","13","19","18","24","P pentomino0",],["14","9","13","8","12","P pentomino0",],["14","13","9","8","4","P pentomino0",],["14","19","13","18","12","P pentomino0",],["14","19","9","18","8","U pentomino0",],["14","13","12","18","23","T pentomino0",],["14","9","4","8","7","T pentomino0",],["14","13","12","8","3","T pentomino0",],["15","16","17","18","13","L pentomino0",],["15","10","5","0","1","L pentomino0",],["15","16","17","18","23","L pentomino0",],["15","16","10","11","5","P pentomino0",],["15","20","16","21","17","P pentomino0",],["15","10","16","11","17","P pentomino0",],["15","10","20","11","21","U pentomino0",],["15","10","5","11","12","T pentomino0",],["16","11","21","17","15","X pentomino0",],["16","11","6","1","0","L pentomino0",],["16","17","18","19","14","L pentomino0",],["16","11","6","1","2","L pentomino0",],["16","17","18","19","24","L pentomino0",],["16","17","11","12","6","P pentomino0",],["16","21","17","22","18","P pentomino0",],["16","15","11","10","6","P pentomino0",],["16","11","17","12","18","P pentomino0",],["16","17","15","22","20","U pentomino0",],["16","21","11","20","10","U pentomino0",],["16","15","17","10","12","U pentomino0",],["16","11","21","12","22","U pentomino0",],["16","11","6","12","13","T pentomino0",],["17","12","22","18","16","X pentomino0",],["17","12","7","2","1","L pentomino0",],["17","12","7","2","3","L pentomino0",],["17","12","16","11","15","P pentomino0",],["17","18","12","13","7","P pentomino0",],["17","22","18","23","19","P pentomino0",],["17","16","12","11","7","P pentomino0",],["17","12","18","13","19","P pentomino0",],["17","22","16","21","15","P pentomino0",],["17","18","16","23","21","U pentomino0",],["17","22","12","21","11","U pentomino0",],["17","16","18","11","13","U pentomino0",],["17","12","22","13","23","U pentomino0",],["17","12","7","11","10","T pentomino0",],["17","16","15","11","6","T pentomino0",],["17","12","7","13","14","T pentomino0",],["18","13","23","19","17","X pentomino0",],["18","17","16","15","20","L pentomino0",],["18","13","8","3","2","L pentomino0",],["18","17","16","15","10","L pentomino0",],["18","13","8","3","4","L pentomino0",],["18","13","17","12","16","P pentomino0",],["18","19","13","14","8","P pentomino0",],["18","17","13","12","8","P pentomino0",],["18","23","17","22","16","P pentomino0",],["18","19","17","24","22","U pentomino0",],["18","23","13","22","12","U pentomino0",],["18","17","19","12","14","U pentomino0",],["18","13","23","14","24","U pentomino0",],["18","13","8","12","11","T pentomino0",],["18","17","16","12","7","T pentomino0",],["19","18","17","16","21","L pentomino0",],["19","14","9","4","3","L pentomino0",],["19","18","17","16","11","L pentomino0",],["19","14","18","13","17","P pentomino0",],["19","18","14","13","9","P pentomino0",],["19","24","18","23","17","P pentomino0",],["19","24","14","23","13","U pentomino0",],["19","14","9","13","12","T pentomino0",],["19","18","17","13","8","T pentomino0",],["20","21","22","23","18","L pentomino0",],["20","15","10","5","6","L pentomino0",],["20","21","15","16","10","P pentomino0",],["20","15","21","16","22","P pentomino0",],["20","15","10","16","17","T pentomino0",],["21","16","11","6","5","L pentomino0",],["21","22","23","24","19","L pentomino0",],["21","16","11","6","7","L pentomino0",],["21","22","16","17","11","P pentomino0",],["21","20","16","15","11","P pentomino0",],["21","16","22","17","23","P pentomino0",],["21","20","22","15","17","U pentomino0",],["21","16","11","17","18","T pentomino0",],["22","17","12","7","6","L pentomino0",],["22","17","12","7","8","L pentomino0",],["22","17","21","16","20","P pentomino0",],["22","23","17","18","12","P pentomino0",],["22","21","17","16","12","P pentomino0",],["22","17","23","18","24","P pentomino0",],["22","21","23","16","18","U pentomino0",],["22","17","12","16","15","T pentomino0",],["22","21","20","16","11","T pentomino0",],["22","17","12","18","19","T pentomino0",],["23","18","13","8","7","L pentomino0",],["23","22","21","20","15","L pentomino0",],["23","18","13","8","9","L pentomino0",],["23","18","22","17","21","P pentomino0",],["23","24","18","19","13","P pentomino0",],["23","22","18","17","13","P pentomino0",],["23","22","24","17","19","U pentomino0",],["23","18","13","17","16","T pentomino0",],["23","22","21","17","12","T pentomino0",],["24","19","14","9","8","L pentomino0",],["24","23","22","21","16","L pentomino0",],["24","19","23","18","22","P pentomino0",],["24","23","19","18","14","P pentomino0",],["24","19","14","18","17","T pentomino0",],["24","23","22","18","13","T pentomino0",],]
encoding = {a:UInt[INT_BITS](UInt[INT_BITS](1) << UInt[INT_BITS](i)) for i,a in enumerate(aspects)}
decoding = {UInt[INT_BITS](UInt[INT_BITS](1) << UInt[INT_BITS](i)):a for i,a in enumerate(aspects)}
encode = lambda e: sum([encoding[k] for k in e], UInt[INT_BITS](0))
decode = lambda i: [decoding[UInt[INT_BITS](UInt[INT_BITS](1) << UInt[INT_BITS](j))] for j in range(len(aspects)) if UInt[INT_BITS](UInt[INT_BITS](1) << UInt[INT_BITS](j)) & i]
encodedEmbeddings = [encode(ee) for ee in e]
embeddings = [decode(ee) for ee in set(encodedEmbeddings)]

A = (UInt[INT_BITS](UInt[INT_BITS](1) << UInt[INT_BITS]((len(aspects)))) - UInt[INT_BITS](1))
E = sorted(list(set(encodedEmbeddings)), reverse=True)
print(len(E), "embeddings")
p = UInt[INT_BITS](0)
S = []
t = UInt[INT_BITS](-1)
counter = 0
visits = 0
S.append((p, [e for e in E if p & e == UInt[INT_BITS](0)], t))
print("Solving Figure 1 Puzzle bitwise...")
seconds = time.time()
while len(S) > 0:
    visits += 1
    pp, EE, t = S[-1]
    S.pop()
    if pp == A:
        counter += 1
        print(f"\r{counter}", end="")
        sys.stdout.flush()
    elif len(EE) > 0:
        # Zero-fit-cutoff (methode 2 Tonneijk)
        c = pp
        for e in EE:
            if e & pp == UInt[INT_BITS](0):
                c = e | c
        if c != A:
            continue # prune
        e = EE[0]
        if e & pp == UInt[INT_BITS](0):
            S.append((pp, EE[1:], t))
            S.append((pp | e, [ee for ee in EE[1:] if (pp | e) & ee == UInt[INT_BITS](0)], e))
        else:
            assert False

print(f"\rFound {counter} solutions in {time.time() - seconds} seconds while visiting {visits} nodes.")
